#!/usr/bin/env bash
#display information about subdomains
DOMAIN="$1"
SUBDOMAIN="$2"

get_record() {
    local full="$1"
    
    # Try dig first
    local dig_ip
    dig_ip=$(dig +short "$full" | awk 'NR==1')
    
    # If dig returns nothing, fallback to /etc/hosts
    if [ -z "$dig_ip" ]; then
        dig_ip=$(grep " $full" /etc/hosts | awk '{print $1}')
    fi
    
    local record_type="A"
echo "The subdomain ${full%%.*} is a $record_type record and points to $dig_ip"
}

if [ -n "$SUBDOMAIN" ]; then
    get_record "$SUBDOMAIN.$DOMAIN"
else
    for sub in www lb-01 web-01 web-02
    do
        get_record "$sub.$DOMAIN"
    done
fi
