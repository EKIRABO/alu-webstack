#!/usr/bin/env bash
# shellcheck disable=SC2086

domain=$1
subdomain=$2

get_info() {
    local full="$1.$domain"

    # Run dig and extract the ANSWER record using awk
    result=$(dig $full | awk '/ANSWER SECTION:/ {getline; print}')

    record_type=$(echo $result | awk '{print $4}')
    destination=$(echo $result | awk '{print $5}')

    echo "The subdomain $1 is a $record_type record and points to $destination"
}

# If only the domain is provided → check all 4 subdomains
if [ -z "$subdomain" ]; then
    get_info "www"
    get_info "lb-01"
    get_info "web-01"
    get_info "web-02"
else
    # If domain + subdomain provided → check only that subdomain
    get_info "$subdomain"
fi
